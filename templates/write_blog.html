{% extends "base.html" %}

{% block title %} 写博客 {% endblock %}

{% block content %}

<link rel="stylesheet" type="text/css" href="/static/css/write_blog.css">
<script src="/static/js/write_blog.js"></script>

<div class="container">
    <!-- 输入标题 -->
    <div class="title-input">
        <label for="title">标题：</label>
        <input id="title" type="text" placeholder="输入标题，最多50字符" maxlength="50">
    </div>
    <!-- 显示内容 -->
    <div class="write-blog">
        <div class="editor">
            <textarea id="markdown_content" placeholder="在这里写你的博客内容...使用 Markdown 语法"></textarea>
        </div>

        <div class="preview">
            <div class="preview-show" style="user-select: none;">预览内容将显示在这里</div>
        </div>
    </div>
    <!-- 添加标签 -->
    <div class="tag-input">
        <label for="tag">标签：</label>
        <input id="tags" type="text" placeholder="添加标签，用逗号隔开，至少1个标签">
    </div>
    <!-- 发布草稿按钮 -->
    <div class="button-group">
        <button class="save" onclick="submitBlog(false)">保存草稿</button>
        <button class="publish" onclick="submitBlog(true)">发布内容</button>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/marked@3.0.7/marked.min.js"></script>
<script>
    const textarea = document.querySelector('.editor textarea');
    const preview = document.querySelector('.preview .preview-show');

    textarea.addEventListener('input', () => {
        const markdownText = textarea.value;
        preview.innerHTML = marked(markdownText);
    });
</script>

{% endblock %}